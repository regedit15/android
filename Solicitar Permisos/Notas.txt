Este proyecto se hizo con el siguiente tutorial:

https://www.youtube.com/watch?v=OJpceQqXIjY


Fuente oficial de android:

https://developer.android.com/training/permissions/requesting?hl=es-419